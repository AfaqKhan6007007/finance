{% load static %}
<style>
  :root{
      --sidebar-width:260px;
      --topbar-height:74px;
      --sidebar-bg:#08463f;
      --accent:#00b387;
      --muted:#7b8588;
      --card-bg:#ffffff;
      --surface:#f3f6f5;
      --text:#183231;
      --row-border:#e6e9e9;
      --success:#19b24b;
      --warning:#f0c94e;
      --danger:#e06b6b;
      --radius:10px;
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  .sidebar{
    position:fixed;
    top:0;
    left:-1px;
    bottom:0;
    width:var(--sidebar-width);
    background-color:white;
    padding:20px;
    display:flex;
    flex-direction:column;
    gap:18px;
    box-shadow:2px 0 0 rgba(0,0,0,0.04);
    z-index:20;
  }

  .nav{display:flex;flex-direction:column;gap:8px;margin-top:6px}

  .nav-item{
    display:flex;
    align-items:center;
    gap:12px;
    border-radius:10px;
    padding:12px 14px;
    text-decoration:none;
    color:inherit;
    cursor:pointer;
  }

  .nav-item:hover,
  .submenu a:hover{
    background-color:rgb(248, 227, 186);
  }

  /* ===== Submenu ===== */
  .nav-item.has-submenu{
    flex-direction:column;
    align-items:flex-start;
  }

  .nav-item.has-submenu.open{
    background:var(--card-bg);
    border-radius:10px;
  }

  .top{
    display:flex;
    justify-content:space-between;
    width:100%;
  }

  .nav-link{
    flex:1;
    padding: 0;
    color: inherit;
    font-weight: 500;
  }

  .nav-link:hover{
    background:rgb(248, 227, 186);
    color: inherit;
  }

  .chev-button{
    width:36px;
    border:none;
    background:transparent;
    cursor:pointer;
    border-radius:10px;
  }

  .submenu{
    width:100%;
    margin-left:8px;
    max-height:0;
    overflow:hidden;
    transition:max-height 240ms ease;
  }

  .has-submenu.open .submenu{
    max-height:300px;
  }

  .submenu a{
    display:block;
    padding:10px 12px;
    border-radius:6px;
    font-size:14px;
    text-decoration:none;
    color:var(--text);
  }

  .chev{
    display:inline-block;
    transform:rotate(90deg);
    transition:transform 200ms ease;
  }

  .has-submenu.open .chev{
    transform:rotate(-90deg);
  }
</style>

<aside class="sidebar">
  <h3 style="text-align:center;color:#00b387;">Finance</h3>

  <nav class="nav">
    <a class="nav-item" href="#">Purchase Tax Template</a>

    <a class="nav-item" href="{% url 'finance-tax-item-templates' %}">
      Item Tax Template
    </a>

    <!-- SETUP -->
    <div class="nav-item has-submenu">
      <div class="top">
        <a class="nav-link" href="#">Setup</a>
        <button class="chev-button" type="button">
          <span class="chev">▸</span>
        </button>
      </div>
      <div class="submenu">
        <a href="{% url 'finance-tax-categories' %}">Tax Category</a>
        <a href="{% url 'finance-tax-rules' %}">Tax Rule</a>
        <a href="{% url 'finance-tax-withholding-categories' %}">Tax Withholding Category</a>
      </div>
    </div>

    <a class="nav-item" href="{% url 'finance-deduction-certificates' %}">Deduction Certificate</a>

    <!-- REPORTS -->
    <div class="nav-item has-submenu">
      <div class="top">
        <a class="nav-link" href="#">Reports</a>
        <button class="chev-button" type="button">
          <span class="chev">▸</span>
        </button>
      </div>
      <div class="submenu">
        <a href="#">TDS Computation Summary</a>
        <a href="#">Tax Withholding Details</a>
      </div>
    </div>

  </nav>
</aside>

<script>
document.addEventListener('click', function (e) {
  const toggle = e.target.closest('.chev-button');
  if (!toggle) return;

  const item = toggle.closest('.has-submenu');
  item.classList.toggle('open');
});
</script>
